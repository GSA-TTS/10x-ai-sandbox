import{s as Y,a as S,e as W,N as J,d as _,c as D,i as V,A as j,Q as K,o as X,f as b,g as w,S as Z,h as E,j as x,w as f,l as M,m as z,y as $,P as ee,n as U,r as O}from"../chunks/scheduler.2ec89978.js";import{S as te,i as se,a as A,t as H,c as F,g as G,b as ae,d as le,m as ne,e as re}from"../chunks/index.276f3600.js";import{g as P}from"../chunks/navigation.9d185f5d.js";import{i as oe,j as ie}from"../chunks/index.09f9d457.js";import{S as ce}from"../chunks/Spinner.bb437d83.js";import{c as ue,u as T,s as fe,W as de,a as Q}from"../chunks/index.3b6ce8f7.js";import{a as L}from"../chunks/Toaster.svelte_svelte_type_style_lang.a694d3ca.js";import"../chunks/sha256.65a6c54a.js";import{p as me}from"../chunks/stores.a948ffbf.js";function q(u){let i,r=`<div class="flex space-x-2"><div class="self-center"><img crossorigin="anonymous" src="${Q}/static/favicon.png" class="w-8 rounded-full" alt="logo"/></div></div>`,a,o,t,s,n,v;const y=[he,_e],m=[];function p(l,c){return l[1]!==void 0?0:1}return s=p(u),n=m[s]=y[s](u),{c(){i=b("div"),i.innerHTML=r,a=S(),o=b("div"),t=b("div"),n.c(),this.h()},l(l){i=w(l,"DIV",{class:!0,"data-svelte-h":!0}),Z(i)!=="svelte-18zumjz"&&(i.innerHTML=r),a=D(l),o=w(l,"DIV",{class:!0});var c=E(o);t=w(c,"DIV",{class:!0});var d=E(t);n.l(d),d.forEach(_),c.forEach(_),this.h()},h(){x(i,"class","fixed m-10 z-50"),x(t,"class","w-full sm:max-w-md px-10 min-h-screen flex flex-col text-center"),x(o,"class","bg-white dark:bg-gray-950 min-h-screen w-full flex justify-center font-mona svelte-zxai24")},m(l,c){V(l,i,c),V(l,a,c),V(l,o,c),f(o,t),m[s].m(t,null),v=!0},p(l,c){let d=s;s=p(l),s===d?m[s].p(l,c):(G(),H(m[d],1,1,()=>{m[d]=null}),F(),n=m[s],n?n.p(l,c):(n=m[s]=y[s](l),n.c()),A(n,1),n.m(t,null))},i(l){v||(A(n),v=!0)},o(l){H(n),v=!1},d(l){l&&(_(i),_(a),_(o)),m[s].d()}}}function _e(u){let i,r,a,o,t,s,n,v,y,m,p,l,c="Sign in with Github",d,h,g;return{c(){i=b("div"),r=b("form"),a=b("div"),o=b("div"),t=M(u[3]),s=S(),n=b("br"),v=M("powered by 10x"),y=S(),m=S(),p=b("div"),l=b("a"),d=M(c),this.h()},l(k){i=w(k,"DIV",{class:!0});var e=E(i);r=w(e,"FORM",{class:!0});var I=E(r);a=w(I,"DIV",{class:!0});var C=E(a);o=w(C,"DIV",{class:!0});var B=E(o);t=z(B,u[3]),s=D(B),n=w(B,"BR",{}),v=z(B,"powered by 10x"),B.forEach(_),y=D(C),C.forEach(_),m=D(I),p=w(I,"DIV",{class:!0});var N=E(p);l=w(N,"A",{href:!0,class:!0});var R=E(l);d=z(R,c),R.forEach(_),N.forEach(_),I.forEach(_),e.forEach(_),this.h()},h(){x(o,"class","text-2xl font-medium"),x(a,"class","mb-1 pb-10"),x(l,"href",Q+"/authorize/github"),x(l,"class","inline-block bg-gray-900 hover:bg-gray-800 w-full rounded-2xl text-white font-medium text-sm py-3 transition text-center"),x(p,"class","mb-1"),x(r,"class","flex flex-col justify-center"),x(i,"class","my-auto pb-10 w-full dark:text-gray-100")},m(k,e){V(k,i,e),f(i,r),f(r,a),f(a,o),f(o,t),f(o,s),f(o,n),f(o,v),f(a,y),f(r,m),f(r,p),f(p,l),f(l,d),h||(g=$(r,"submit",ee(u[6])),h=!0)},p(k,e){e&8&&U(t,k[3])},i:O,o:O,d(k){k&&_(i),h=!1,g()}}}function he(u){let i,r,a,o=u[2].t("Signing in")+"",t,s,n=u[2].t("to")+"",v,y,m,p,l,c,d;return c=new ce({}),{c(){i=b("div"),r=b("div"),a=b("div"),t=M(o),s=S(),v=M(n),y=S(),m=M(u[3]),p=S(),l=b("div"),ae(c.$$.fragment),this.h()},l(h){i=w(h,"DIV",{class:!0});var g=E(i);r=w(g,"DIV",{class:!0});var k=E(r);a=w(k,"DIV",{});var e=E(a);t=z(e,o),s=D(e),v=z(e,n),y=D(e),m=z(e,u[3]),e.forEach(_),p=D(k),l=w(k,"DIV",{});var I=E(l);le(c.$$.fragment,I),I.forEach(_),k.forEach(_),g.forEach(_),this.h()},h(){x(r,"class","flex items-center justify-center gap-3 text-xl sm:text-2xl text-center font-medium dark:text-gray-200"),x(i,"class","my-auto pb-10 w-full")},m(h,g){V(h,i,g),f(i,r),f(r,a),f(a,t),f(a,s),f(a,v),f(a,y),f(a,m),f(r,p),f(r,l),ne(c,l,null),d=!0},p(h,g){(!d||g&4)&&o!==(o=h[2].t("Signing in")+"")&&U(t,o),(!d||g&4)&&n!==(n=h[2].t("to")+"")&&U(v,n),(!d||g&8)&&U(m,h[3])},i(h){d||(A(c.$$.fragment,h),d=!0)},o(h){H(c.$$.fragment,h),d=!1},d(h){h&&_(i),re(c)}}}function pe(u){let i,r,a,o;document.title=i=`
		${u[3]}
	`;let t=u[0]&&q(u);return{c(){r=S(),t&&t.c(),a=W()},l(s){J("svelte-sdpf07",document.head).forEach(_),r=D(s),t&&t.l(s),a=W()},m(s,n){V(s,r,n),t&&t.m(s,n),V(s,a,n),o=!0},p(s,[n]){(!o||n&8)&&i!==(i=`
		${s[3]}
	`)&&(document.title=i),s[0]?t?(t.p(s,n),n&1&&A(t,1)):(t=q(s),t.c(),A(t,1),t.m(a.parentNode,a)):t&&(G(),H(t,1,1,()=>{t=null}),F())},i(s){o||(A(t),o=!0)},o(s){H(t),o=!1},d(s){s&&(_(r),_(a)),t&&t.d(s)}}}let ve="",ge="";function be(u,i,r){let a,o,t,s,n,v;j(u,ue,e=>r(9,a=e)),j(u,me,e=>r(10,o=e)),j(u,T,e=>r(1,t=e)),j(u,fe,e=>r(11,s=e)),j(u,de,e=>r(3,v=e));const y=K("i18n");j(u,y,e=>r(2,n=e));let m=!1,p="",l="";const c=async e=>{e&&(console.log(e),L.success(n.t("You're now logged in.")),localStorage.token=e.token,s.emit("user-join",{auth:{token:e.token}}),await T.set(e),P("/"),console.log("sessionUser:",e))},d=async()=>{const e=await ie(ve,ge).catch(I=>(L.error(I),null));e&&await c(e)},h=async()=>{const e=await oe(p,l).catch(I=>(L.error(I),null));e?await c(e):console.log("sessionUser does not exist")},g=async()=>{await d()};return X(async()=>{console.log("Current URL:",o.url.href),t!==void 0&&await P("/"),r(0,m=!0);const e=o.url.searchParams;e.has("state")&&e.has("code")&&(p=e.get("state")??"",l=e.get("code")??"",p&&l&&await h()),(((a==null?void 0:a.features.auth_trusted_header)??!1)||(a==null?void 0:a.features.auth)===!1)&&await d()}),[m,t,n,v,y,g,()=>{g()}]}class je extends te{constructor(i){super(),se(this,i,be,pe,Y,{})}}export{je as component};
//# sourceMappingURL=21.896dcb68.js.map
