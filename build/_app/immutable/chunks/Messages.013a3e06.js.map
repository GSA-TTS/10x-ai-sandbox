{"version":3,"mappings":"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","names":["ctx","insert_hydration","target","svg","anchor","append_hydration","path","className","$$props","strokeWidth","div","set_data","t1","t1_value","t_value","dirty","t","div0","div1","t0","t0_value","t2","t2_value","create_if_block","div4","button","div3","div2","create_if_block_1","i","i18n","getContext","submitPrompt","suggestionPrompts","prompts","onMount","containerElement","event","prompt","$$invalidate","acc","current","WEBUI_BASE_URL","attr","div_class_value","_a","img","src","_c","_b","_d","profileimage_changes","span","dayjs","create_if_block_13","create_if_block_14","if_block1","create_if_block_12","each_value","ensure_array_like","t3","t3_value","src_url_equal","img_src_value","create_if_block_8","create_if_block_9","create_if_block_10","create_if_block_5","create_if_block_4","if_block2","create_if_block_3","pre","_e","textarea","textarea_id_value","button0","button1","create_if_block_6","create_if_block_2","create_if_block_15","create_if_block_11","create_if_block_7","div0_class_value","div2_dir_value","e","dispatch","createEventDispatcher","user","message","siblings","isFirstMessage","readOnly","confirmEditMessage","showPreviousMessage","showNextMessage","copyToClipboard","edit","editedContent","messageEditTextAreaElement","editMessageHandler","tick","editMessageConfirmHandler","cancelEditMessage","deleteMessageHandler","func","m","file","$$value","isCmdOrCtrlPressed","isEnterPressed","div11","show_if","raw1_value","pre_style_value","code_1","html_tag_1","id","lang","code","highlightedCode","executing","stdout","stderr","result","copied","copyCode","checkPythonCode","str","pythonSyntax","syntax","executePython","executePythonAsWorker","pyodide","loadPyodide","text","micropip","packages","pltCanvasElement","error","pyodideWorker","PyodideWorker","data","hljs","show","alt","mounted","downloadImage","url","filename","response","blob","objectUrl","link","handleKeyDown","_src","showImagePreview","value","button_class_value","t5","t5_value","messageId","LIKE_REASONS","DISLIKE_REASONS","loadReasons","$i18n","reasons","selectedReason","comment","submitHandler","toast","reason","hr","t7_value","if_block","t4","t4_value","t7","citation","mergedDocuments","c","a","a_href_value","a_class_value","slide","status","state","constants_0","child_ctx","create_if_block_24","each_value_2","each_blocks","image","Image","image_changes","create_if_block_23","create_if_block_21","if_block3","raw_value","marked","revertSanitizedResponseContent","codeblock_changes","func_1","style","circle0","circle1","circle2","button_id_value","path0","path1","ratecomment_props","ratecomment_changes","_f","_g","create_if_block_19","get_if_ctx","div1_class_value","div3_class_value","div3_id_value","div3_dir_value","previous_key","safe_not_equal","f","document","index","metadata","source","existingSource","item","isLastMessage","updateChatMessages","confirmEditResponseMessage","rateMessage","continueGeneration","regenerateResponse","model","editTextAreaElement","tooltipInstance","sentencesAudio","speaking","speakingIdx","loadingSpeech","generatingImage","showRateComment","showCitationModal","selectedCitation","renderer","origLinkRenderer","href","title","extensions","defaults","renderStyling","renderLatex","tooltipContent","approximateToHumanReadable","tippy","chatMessageElements","element","auto_render","playAudio","idx","res","audio","r","$settings","toggleSpeakMessage","$config","sentences","extractSentences","mergedTexts","currentText","lastIndex","previousText","arr","lastPlayedAudioPromise","sentence","synthesizeOpenAISpeech","blobUrl","voices","getVoicesLoop","voice","v","speak","generateImage","imageGenerations","mermaid","$models","tokens","sanitizeResponseContent","html_tag","_i","_h","_l","_k","_j","div7","div5","div6","div0_intro","create_in_transition","fade","div2_intro","div3_intro","div6_intro","modelIds","models","selectedModelIdx","modelIdx","$_models","responsemessage_changes","div0_id_value","chatId","history","messages","messageIdx","parentMessage","currentMessageId","groupedMessagesIdx","groupedMessages","messageChildrenIds","func_2","updateChatById","modelMessages","comparemessages_changes","sendPrompt","$_user","processing","bottomPadding","autoScroll","selectedModels","scrollToBottom","copyToClipboardWithToast","content","userPrompt","userMessageId","uuidv4","userMessage","mIdx","messageParentId","chats","getChatList","rating","childrenIds","messageToDelete","parentMessageId","childMessageIds","hasDescendantMessages","childId","childMessage","grandChildId","p","clipboardText","err","chatInputElement","words","findWordIndices","word"],"sources":["../../../../../../src/lib/components/icons/Bolt.svelte","../../../../../../src/lib/components/chat/MessageInput/Suggestions.svelte","../../../../../../src/lib/components/chat/Messages/Name.svelte","../../../../../../src/lib/components/chat/Messages/ProfileImage.svelte","../../../../../../src/lib/components/chat/Messages/UserMessage.svelte","../../../../../../src/lib/components/chat/Messages/Skeleton.svelte","../../../../../../src/lib/components/chat/Messages/CodeBlock.svelte","../../../../../../src/lib/components/common/ImagePreview.svelte","../../../../../../src/lib/components/common/Image.svelte","../../../../../../src/lib/components/chat/Messages/RateComment.svelte","../../../../../../src/lib/components/chat/Messages/CitationsModal.svelte","../../../../../../src/lib/components/icons/ChevronUp.svelte","../../../../../../src/lib/components/icons/MagnifyingGlass.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage/WebSearchResults.svelte","../../../../../../src/lib/components/chat/Messages/ResponseMessage.svelte","../../../../../../src/lib/components/chat/Messages/Placeholder.svelte","../../../../../../src/lib/components/chat/Messages/CompareMessages.svelte","../../../../../../src/lib/components/chat/Messages.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let className = 'size-3';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport Bolt from '$lib/components/icons/Bolt.svelte';\n\timport { onMount, getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let submitPrompt: Function;\n\texport let suggestionPrompts = [];\n\n\tlet prompts = [];\n\n\t$: prompts = suggestionPrompts\n\t\t.reduce((acc, current) => [...acc, ...[current]], [])\n\t\t.sort(() => Math.random() - 0.5);\n\t// suggestionPrompts.length <= 4\n\t// \t? suggestionPrompts\n\t// \t: suggestionPrompts.sort(() => Math.random() - 0.5).slice(0, 4);\n\n\tonMount(() => {\n\t\tconst containerElement = document.getElementById('suggestions-container');\n\n\t\tif (containerElement) {\n\t\t\tcontainerElement.addEventListener('wheel', function (event) {\n\t\t\t\tif (event.deltaY !== 0) {\n\t\t\t\t\t// If scrolling vertically, prevent default behavior\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t// Adjust horizontal scroll position based on vertical scroll\n\t\t\t\t\tcontainerElement.scrollLeft += event.deltaY;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n</script>\n\n{#if prompts.length > 0}\n\t<div class=\"mb-2 flex gap-1 text-sm font-medium items-center text-gray-400 dark:text-gray-600\">\n\t\t<Bolt />\n\t\t{$i18n.t('Suggested')}\n\t</div>\n{/if}\n\n<div class=\"w-full\">\n\t<div\n\t\tclass=\"relative w-full flex gap-2 snap-x snap-mandatory md:snap-none overflow-x-auto tabs\"\n\t\tid=\"suggestions-container\"\n\t>\n\t\t{#each prompts as prompt, promptIdx}\n\t\t\t<div class=\"snap-center shrink-0\">\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flex flex-col flex-1 shrink-0 w-64 justify-between h-36 p-5 px-6 bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 rounded-3xl transition group\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tsubmitPrompt(prompt.content);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"flex flex-col text-left\">\n\t\t\t\t\t\t{#if prompt.title && prompt.title[0] !== ''}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"  font-medium dark:text-gray-300 dark:group-hover:text-gray-200 transition\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{prompt.title[0]}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"text-sm text-gray-600 font-normal line-clamp-2\">{prompt.title[1]}</div>\n\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\" self-center text-sm font-medium dark:text-gray-300 dark:group-hover:text-gray-100 transition line-clamp-2\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{prompt.content}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"w-full flex justify-between\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"text-xs text-gray-400 group-hover:text-gray-500 dark:text-gray-600 dark:group-hover:text-gray-500 transition self-center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Prompt')}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"self-end p-1 rounded-lg text-gray-300 group-hover:text-gray-800 dark:text-gray-700 dark:group-hover:text-gray-100 transition\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z\"\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{/each}\n\n\t\t<!-- <div class=\"snap-center shrink-0\">\n\t\t<img\n\t\t\tclass=\"shrink-0 w-80 h-40 rounded-lg shadow-xl bg-white\"\n\t\t\tsrc=\"https://images.unsplash.com/photo-1604999565976-8913ad2ddb7c?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=crop&amp;w=320&amp;h=160&amp;q=80\"\n\t\t/>\n\t</div> -->\n\t</div>\n</div>\n\n<style>\n\t.tabs::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.tabs {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n</style>\n","<div class=\" self-center font-bold mb-0.5 line-clamp-1 contents\">\n\t<slot />\n</div>\n","<script lang=\"ts\">\n\timport { settings } from '$lib/stores';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\texport let src = '/user.png';\n</script>\n\n<div class={($settings?.chatDirection ?? 'LTR') === 'LTR' ? 'mr-3' : 'ml-3'}>\n\t<img\n\t\tcrossorigin=\"anonymous\"\n\t\tsrc={src.startsWith(WEBUI_BASE_URL) ||\n\t\tsrc.startsWith('https://www.gravatar.com/avatar/') ||\n\t\tsrc.startsWith('data:') ||\n\t\tsrc.startsWith('/')\n\t\t\t? src\n\t\t\t: `/user.png`}\n\t\tclass=\" w-8 object-cover rounded-full\"\n\t\talt=\"profile\"\n\t\tdraggable=\"false\"\n\t/>\n</div>\n","<script lang=\"ts\">\n\timport dayjs from 'dayjs';\n\n\timport { tick, createEventDispatcher, getContext } from 'svelte';\n\timport Name from './Name.svelte';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport { models, settings } from '$lib/stores';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\n\timport { user as _user } from '$lib/stores';\n\n\tconst i18n = getContext('i18n');\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let user;\n\texport let message;\n\texport let siblings;\n\texport let isFirstMessage: boolean;\n\texport let readOnly: boolean;\n\n\texport let confirmEditMessage: Function;\n\texport let showPreviousMessage: Function;\n\texport let showNextMessage: Function;\n\texport let copyToClipboard: Function;\n\n\tlet edit = false;\n\tlet editedContent = '';\n\tlet messageEditTextAreaElement: HTMLTextAreaElement;\n\tconst editMessageHandler = async () => {\n\t\tedit = true;\n\t\teditedContent = message.content;\n\n\t\tawait tick();\n\n\t\tmessageEditTextAreaElement.style.height = '';\n\t\tmessageEditTextAreaElement.style.height = `${messageEditTextAreaElement.scrollHeight}px`;\n\n\t\tmessageEditTextAreaElement?.focus();\n\t};\n\n\tconst editMessageConfirmHandler = async () => {\n\t\tconfirmEditMessage(message.id, editedContent);\n\n\t\tedit = false;\n\t\teditedContent = '';\n\t};\n\n\tconst cancelEditMessage = () => {\n\t\tedit = false;\n\t\teditedContent = '';\n\t};\n\n\tconst deleteMessageHandler = async () => {\n\t\tdispatch('delete', message.id);\n\t};\n</script>\n\n<div class=\" flex w-full user-message\" dir={$settings.chatDirection}>\n\t{#if !($settings?.chatBubble ?? true)}\n\t\t<ProfileImage\n\t\t\tsrc={message.user\n\t\t\t\t? $models.find((m) => m.id === message.user)?.info?.meta?.profile_image_url ?? '/user.png'\n\t\t\t\t: user?.profile_image_url ?? '/user.png'}\n\t\t/>\n\t{/if}\n\t<div class=\"w-full overflow-hidden pl-1\">\n\t\t{#if !($settings?.chatBubble ?? true)}\n\t\t\t<div>\n\t\t\t\t<Name>\n\t\t\t\t\t{#if message.user}\n\t\t\t\t\t\t{$i18n.t('You')}\n\t\t\t\t\t\t<span class=\" text-gray-500 text-sm font-medium\">{message?.user ?? ''}</span>\n\t\t\t\t\t{:else if $settings.showUsername || $_user.name !== user.name}\n\t\t\t\t\t\t{user.name}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('You')}\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\" invisible group-hover:visible text-gray-400 text-xs font-medium uppercase\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{dayjs(message.timestamp * 1000).format($i18n.t('h:mm a'))}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</Name>\n\t\t\t</div>\n\t\t{/if}\n\n\t\t<div\n\t\t\tclass=\"prose chat-{message.role} w-full max-w-full flex flex-col justify-end dark:prose-invert prose-headings:my-0 prose-p:my-0 prose-p:-mb-4 prose-pre:my-0 prose-table:my-0 prose-blockquote:my-0 prose-img:my-0 prose-ul:-my-4 prose-ol:-my-4 prose-li:-my-3 prose-ul:-mb-6 prose-ol:-mb-6 prose-li:-mb-4 whitespace-pre-line\"\n\t\t>\n\t\t\t{#if message.files}\n\t\t\t\t<div class=\"mt-2.5 mb-1 w-full flex flex-col justify-end overflow-x-auto gap-1 flex-wrap\">\n\t\t\t\t\t{#each message.files as file}\n\t\t\t\t\t\t<div class={$settings?.chatBubble ?? true ? 'self-end' : ''}>\n\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t<img src={file.url} alt=\"input\" class=\" max-h-96 rounded-lg\" draggable=\"false\" />\n\t\t\t\t\t\t\t{:else if file.type === 'doc'}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"h-16 w-72 flex items-center space-x-3 px-2.5 dark:bg-gray-850 rounded-xl border border-gray-200 dark:border-none text-left\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tif (file?.url) {\n\t\t\t\t\t\t\t\t\t\t\twindow.open(file?.url, '_blank').focus();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"p-2.5 bg-red-400 text-white rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-6 h-6\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z\"\n\t\t\t\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t\t\t\t\t\t\t<div class=\" dark:text-gray-100 text-sm font-medium line-clamp-1\">\n\t\t\t\t\t\t\t\t\t\t\t{file.name}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-sm\">{$i18n.t('Document')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{:else if file.type === 'collection'}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"h-16 w-72 flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none text-left\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"p-2.5 bg-red-400 text-white rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-6 h-6\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t\t\t\t\t\t\t<div class=\" dark:text-gray-100 text-sm font-medium line-clamp-1\">\n\t\t\t\t\t\t\t\t\t\t\t{file?.title ?? `#${file.name}`}\n\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t<div class=\" text-gray-500 text-sm\">{$i18n.t('Collection')}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t{#if edit === true}\n\t\t\t\t<div class=\" w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 mb-2\">\n\t\t\t\t\t<textarea\n\t\t\t\t\t\tid=\"message-edit-{message.id}\"\n\t\t\t\t\t\tbind:this={messageEditTextAreaElement}\n\t\t\t\t\t\tclass=\" bg-transparent outline-none w-full resize-none\"\n\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\ton:input={(e) => {\n\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\te.target.style.height = `${e.target.scrollHeight}px`;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\tdocument.getElementById('close-edit-message-button')?.click();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst isCmdOrCtrlPressed = e.metaKey || e.ctrlKey;\n\t\t\t\t\t\t\tconst isEnterPressed = e.key === 'Enter';\n\n\t\t\t\t\t\t\tif (isCmdOrCtrlPressed && isEnterPressed) {\n\t\t\t\t\t\t\t\tdocument.getElementById('save-edit-message-button')?.click();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-end space-x-1.5 text-sm font-medium\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\tclass=\"px-4 py-2 bg-white dark:bg-gray-900 hover:bg-gray-100 text-gray-800 dark:text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tcancelEditMessage();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tid=\"save-edit-message-button\"\n\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-gray-900 dark:bg-white hover:bg-gray-850 text-gray-100 dark:text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\teditMessageConfirmHandler();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{$i18n.t('Send')}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{:else}\n\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t<div class=\"flex {$settings?.chatBubble ?? true ? 'justify-end' : ''} mb-2\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"rounded-3xl {$settings?.chatBubble ?? true\n\t\t\t\t\t\t\t\t? `max-w-[90%] px-5 py-2  bg-gray-50 dark:bg-gray-850 ${\n\t\t\t\t\t\t\t\t\t\tmessage.files ? 'rounded-tr-lg' : ''\n\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t: ''}  \"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<pre id=\"user-message\">{message.content}</pre>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" flex {$settings?.chatBubble ?? true\n\t\t\t\t\t\t\t? 'justify-end'\n\t\t\t\t\t\t\t: ''}  text-gray-600 dark:text-gray-500\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{#if !($settings?.chatBubble ?? true)}\n\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t<div class=\"flex self-center\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t<div class=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100\">\n\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"invisible group-hover:visible p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition edit-user-message-button\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\teditMessageHandler();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t<Tooltip content={$i18n.t('Copy')} placement=\"bottom\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass=\"invisible group-hover:visible p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\tcopyToClipboard(message.content);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\td=\"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t{#if !isFirstMessage && !readOnly}\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Delete')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"invisible group-hover:visible p-1 rounded dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tdeleteMessageHandler();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if $settings?.chatBubble ?? true}\n\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t<div class=\"flex self-center\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t<div class=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100\">\n\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</div>\n","<div class=\"w-full mt-2 mb-4\">\n\t<div class=\"animate-pulse flex w-full\">\n\t\t<div class=\"space-y-2 w-full\">\n\t\t\t<div class=\"h-2 bg-gray-200 dark:bg-gray-600 rounded mr-14\" />\n\n\t\t\t<div class=\"grid grid-cols-3 gap-4\">\n\t\t\t\t<div class=\"h-2 bg-gray-200 dark:bg-gray-600 rounded col-span-2\" />\n\t\t\t\t<div class=\"h-2 bg-gray-200 dark:bg-gray-600 rounded col-span-1\" />\n\t\t\t</div>\n\t\t\t<div class=\"grid grid-cols-4 gap-4\">\n\t\t\t\t<div class=\"h-2 bg-gray-200 dark:bg-gray-600 rounded col-span-1\" />\n\t\t\t\t<div class=\"h-2 bg-gray-200 dark:bg-gray-600 rounded col-span-2\" />\n\t\t\t\t<div class=\"h-2 bg-gray-200 dark:bg-gray-600 rounded col-span-1 mr-4\" />\n\t\t\t</div>\n\n\t\t\t<div class=\"h-2 bg-gray-200 dark:bg-gray-600 rounded\" />\n\t\t</div>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport { copyToClipboard } from '$lib/utils';\n\timport hljs from 'highlight.js';\n\timport 'highlight.js/styles/github-dark.min.css';\n\timport { loadPyodide } from 'pyodide';\n\timport { onMount, tick } from 'svelte';\n\timport PyodideWorker from '$lib/workers/pyodide.worker?worker';\n\n\texport let id = '';\n\n\texport let lang = '';\n\texport let code = '';\n\n\tlet highlightedCode = null;\n\tlet executing = false;\n\n\tlet stdout = null;\n\tlet stderr = null;\n\tlet result = null;\n\n\tlet copied = false;\n\n\tconst copyCode = async () => {\n\t\tcopied = true;\n\t\tawait copyToClipboard(code);\n\n\t\tsetTimeout(() => {\n\t\t\tcopied = false;\n\t\t}, 1000);\n\t};\n\n\tconst checkPythonCode = (str) => {\n\t\t// Check if the string contains typical Python syntax characters\n\t\tconst pythonSyntax = [\n\t\t\t'def ',\n\t\t\t'else:',\n\t\t\t'elif ',\n\t\t\t'try:',\n\t\t\t'except:',\n\t\t\t'finally:',\n\t\t\t'yield ',\n\t\t\t'lambda ',\n\t\t\t'assert ',\n\t\t\t'nonlocal ',\n\t\t\t'del ',\n\t\t\t'True',\n\t\t\t'False',\n\t\t\t'None',\n\t\t\t' and ',\n\t\t\t' or ',\n\t\t\t' not ',\n\t\t\t' in ',\n\t\t\t' is ',\n\t\t\t' with '\n\t\t];\n\n\t\tfor (let syntax of pythonSyntax) {\n\t\t\tif (str.includes(syntax)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// If none of the above conditions met, it's probably not Python code\n\t\treturn false;\n\t};\n\n\tconst executePython = async (code) => {\n\t\tif (!code.includes('input') && !code.includes('matplotlib')) {\n\t\t\texecutePythonAsWorker(code);\n\t\t} else {\n\t\t\tresult = null;\n\t\t\tstdout = null;\n\t\t\tstderr = null;\n\n\t\t\texecuting = true;\n\n\t\t\tdocument.pyodideMplTarget = document.getElementById(`plt-canvas-${id}`);\n\n\t\t\tlet pyodide = await loadPyodide({\n\t\t\t\tindexURL: '/pyodide/',\n\t\t\t\tstdout: (text) => {\n\t\t\t\t\tconsole.log('Python output:', text);\n\n\t\t\t\t\tif (stdout) {\n\t\t\t\t\t\tstdout += `${text}\\n`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstdout = `${text}\\n`;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tstderr: (text) => {\n\t\t\t\t\tconsole.log('An error occured:', text);\n\t\t\t\t\tif (stderr) {\n\t\t\t\t\t\tstderr += `${text}\\n`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstderr = `${text}\\n`;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpackages: ['micropip']\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tconst micropip = pyodide.pyimport('micropip');\n\n\t\t\t\t// await micropip.set_index_urls('https://pypi.org/pypi/{package_name}/json');\n\n\t\t\t\tlet packages = [\n\t\t\t\t\tcode.includes('requests') ? 'requests' : null,\n\t\t\t\t\tcode.includes('bs4') ? 'beautifulsoup4' : null,\n\t\t\t\t\tcode.includes('numpy') ? 'numpy' : null,\n\t\t\t\t\tcode.includes('pandas') ? 'pandas' : null,\n\t\t\t\t\tcode.includes('matplotlib') ? 'matplotlib' : null,\n\t\t\t\t\tcode.includes('sklearn') ? 'scikit-learn' : null,\n\t\t\t\t\tcode.includes('scipy') ? 'scipy' : null,\n\t\t\t\t\tcode.includes('re') ? 'regex' : null,\n\t\t\t\t\tcode.includes('seaborn') ? 'seaborn' : null\n\t\t\t\t].filter(Boolean);\n\n\t\t\t\tconsole.log(packages);\n\t\t\t\tawait micropip.install(packages);\n\n\t\t\t\tresult = await pyodide.runPythonAsync(`from js import prompt\ndef input(p):\n    return prompt(p)\n__builtins__.input = input`);\n\n\t\t\t\tresult = await pyodide.runPython(code);\n\n\t\t\t\tif (!result) {\n\t\t\t\t\tresult = '[NO OUTPUT]';\n\t\t\t\t}\n\n\t\t\t\tconsole.log(result);\n\t\t\t\tconsole.log(stdout);\n\t\t\t\tconsole.log(stderr);\n\n\t\t\t\tconst pltCanvasElement = document.getElementById(`plt-canvas-${id}`);\n\n\t\t\t\tif (pltCanvasElement?.innerHTML !== '') {\n\t\t\t\t\tpltCanvasElement.classList.add('pt-4');\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t\tstderr = error;\n\t\t\t}\n\n\t\t\texecuting = false;\n\t\t}\n\t};\n\n\tconst executePythonAsWorker = async (code) => {\n\t\tresult = null;\n\t\tstdout = null;\n\t\tstderr = null;\n\n\t\texecuting = true;\n\n\t\tlet packages = [\n\t\t\tcode.includes('requests') ? 'requests' : null,\n\t\t\tcode.includes('bs4') ? 'beautifulsoup4' : null,\n\t\t\tcode.includes('numpy') ? 'numpy' : null,\n\t\t\tcode.includes('pandas') ? 'pandas' : null,\n\t\t\tcode.includes('sklearn') ? 'scikit-learn' : null,\n\t\t\tcode.includes('scipy') ? 'scipy' : null,\n\t\t\tcode.includes('re') ? 'regex' : null,\n\t\t\tcode.includes('seaborn') ? 'seaborn' : null\n\t\t].filter(Boolean);\n\n\t\tconsole.log(packages);\n\n\t\tconst pyodideWorker = new PyodideWorker();\n\n\t\tpyodideWorker.postMessage({\n\t\t\tid: id,\n\t\t\tcode: code,\n\t\t\tpackages: packages\n\t\t});\n\n\t\tsetTimeout(() => {\n\t\t\tif (executing) {\n\t\t\t\texecuting = false;\n\t\t\t\tstderr = 'Execution Time Limit Exceeded';\n\t\t\t\tpyodideWorker.terminate();\n\t\t\t}\n\t\t}, 60000);\n\n\t\tpyodideWorker.onmessage = (event) => {\n\t\t\tconsole.log('pyodideWorker.onmessage', event);\n\t\t\tconst { id, ...data } = event.data;\n\n\t\t\tconsole.log(id, data);\n\n\t\t\tdata['stdout'] && (stdout = data['stdout']);\n\t\t\tdata['stderr'] && (stderr = data['stderr']);\n\t\t\tdata['result'] && (result = data['result']);\n\n\t\t\texecuting = false;\n\t\t};\n\n\t\tpyodideWorker.onerror = (event) => {\n\t\t\tconsole.log('pyodideWorker.onerror', event);\n\t\t\texecuting = false;\n\t\t};\n\t};\n\n\t$: if (code) {\n\t\thighlightedCode = hljs.highlightAuto(code, hljs.getLanguage(lang)?.aliases).value || code;\n\t}\n</script>\n\n<div class=\"mb-4\" dir=\"ltr\">\n\t<div\n\t\tclass=\"flex justify-between bg-[#202123] text-white text-xs px-4 pt-1 pb-0.5 rounded-t-lg overflow-x-auto\"\n\t>\n\t\t<div class=\"p-1\">{@html lang}</div>\n\n\t\t<div class=\"flex items-center\">\n\t\t\t{#if lang.toLowerCase() === 'python' || lang.toLowerCase() === 'py' || (lang === '' && checkPythonCode(code))}\n\t\t\t\t{#if executing}\n\t\t\t\t\t<div class=\"copy-code-button bg-none border-none p-1 cursor-not-allowed\">Running</div>\n\t\t\t\t{:else}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"copy-code-button bg-none border-none p-1\"\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\texecutePython(code);\n\t\t\t\t\t\t}}>Run</button\n\t\t\t\t\t>\n\t\t\t\t{/if}\n\t\t\t{/if}\n\t\t\t<button class=\"copy-code-button bg-none border-none p-1\" on:click={copyCode}\n\t\t\t\t>{copied ? 'Copied' : 'Copy Code'}</button\n\t\t\t>\n\t\t</div>\n\t</div>\n\n\t<pre\n\t\tclass=\" hljs p-4 px-5 overflow-x-auto\"\n\t\tstyle=\"border-top-left-radius: 0px; border-top-right-radius: 0px; {(executing ||\n\t\t\tstdout ||\n\t\t\tstderr ||\n\t\t\tresult) &&\n\t\t\t'border-bottom-left-radius: 0px; border-bottom-right-radius: 0px;'}\"><code\n\t\t\tclass=\"language-{lang} rounded-t-none whitespace-pre\">{@html highlightedCode || code}</code\n\t\t></pre>\n\n\t<div\n\t\tid=\"plt-canvas-{id}\"\n\t\tclass=\"bg-[#202123] text-white max-w-full overflow-x-auto scrollbar-hidden\"\n\t/>\n\n\t{#if executing}\n\t\t<div class=\"bg-[#202123] text-white px-4 py-4 rounded-b-lg\">\n\t\t\t<div class=\" text-gray-500 text-xs mb-1\">STDOUT/STDERR</div>\n\t\t\t<div class=\"text-sm\">Running...</div>\n\t\t</div>\n\t{:else if stdout || stderr || result}\n\t\t<div class=\"bg-[#202123] text-white px-4 py-4 rounded-b-lg\">\n\t\t\t<div class=\" text-gray-500 text-xs mb-1\">STDOUT/STDERR</div>\n\t\t\t<div class=\"text-sm\">{stdout || stderr || result}</div>\n\t\t</div>\n\t{/if}\n</div>\n","<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\n\texport let show = false;\n\texport let src = '';\n\texport let alt = '';\n\n\tlet mounted = false;\n\n\tconst downloadImage = (url, filename) => {\n\t\tfetch(url)\n\t\t\t.then((response) => response.blob())\n\t\t\t.then((blob) => {\n\t\t\t\tconst objectUrl = window.URL.createObjectURL(blob);\n\t\t\t\tconst link = document.createElement('a');\n\t\t\t\tlink.href = objectUrl;\n\t\t\t\tlink.download = filename;\n\t\t\t\tdocument.body.appendChild(link);\n\t\t\t\tlink.click();\n\t\t\t\tdocument.body.removeChild(link);\n\t\t\t\twindow.URL.revokeObjectURL(objectUrl);\n\t\t\t})\n\t\t\t.catch((error) => console.error('Error downloading image:', error));\n\t};\n\n\tconst handleKeyDown = (event: KeyboardEvent) => {\n\t\tif (event.key === 'Escape') {\n\t\t\tconsole.log('Escape');\n\t\t\tshow = false;\n\t\t}\n\t};\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n\n\t$: if (mounted) {\n\t\tif (show) {\n\t\t\twindow.addEventListener('keydown', handleKeyDown);\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t} else {\n\t\t\twindow.removeEventListener('keydown', handleKeyDown);\n\t\t\tdocument.body.style.overflow = 'unset';\n\t\t}\n\t}\n</script>\n\n{#if show}\n\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t<div\n\t\tclass=\"fixed top-0 right-0 left-0 bottom-0 bg-black text-white w-full min-h-screen h-screen flex justify-center z-50 overflow-hidden overscroll-contain\"\n\t>\n\t\t<div class=\" absolute left-0 w-full flex justify-between\">\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\" p-5\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tshow = false;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\tclass=\"w-6 h-6\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18 18 6M6 6l12 12\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tclass=\" p-5\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tdownloadImage(src, src.substring(src.lastIndexOf('/') + 1));\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"w-6 h-6\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M10.75 2.75a.75.75 0 0 0-1.5 0v8.614L6.295 8.235a.75.75 0 1 0-1.09 1.03l4.25 4.5a.75.75 0 0 0 1.09 0l4.25-4.5a.75.75 0 0 0-1.09-1.03l-2.955 3.129V2.75Z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M3.5 12.75a.75.75 0 0 0-1.5 0v2.5A2.75 2.75 0 0 0 4.75 18h10.5A2.75 2.75 0 0 0 18 15.25v-2.5a.75.75 0 0 0-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5Z\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<img {src} {alt} class=\" mx-auto h-full object-scale-down\" />\n\t</div>\n{/if}\n","<script lang=\"ts\">\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport ImagePreview from './ImagePreview.svelte';\n\n\texport let src = '';\n\texport let alt = '';\n\n\tlet _src = '';\n\n\t$: _src = src.startsWith('/') ? `${WEBUI_BASE_URL}${src}` : src;\n\n\tlet showImagePreview = false;\n</script>\n\n<ImagePreview bind:show={showImagePreview} src={_src} {alt} />\n<button\n\ton:click={() => {\n\t\tconsole.log('image preview');\n\t\tshowImagePreview = true;\n\t}}\n>\n\t<img src={_src} {alt} class=\" max-h-96 rounded-lg\" draggable=\"false\" data-cy=\"image\" />\n</button>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\n\timport { createEventDispatcher, onMount, getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\tconst dispatch = createEventDispatcher();\n\n\texport let messageId = null;\n\texport let show = false;\n\texport let message;\n\n\tlet LIKE_REASONS = [];\n\tlet DISLIKE_REASONS = [];\n\n\tfunction loadReasons() {\n\t\tLIKE_REASONS = [\n\t\t\t$i18n.t('Accurate information'),\n\t\t\t$i18n.t('Followed instructions perfectly'),\n\t\t\t$i18n.t('Showcased creativity'),\n\t\t\t$i18n.t('Positive attitude'),\n\t\t\t$i18n.t('Attention to detail'),\n\t\t\t$i18n.t('Thorough explanation'),\n\t\t\t$i18n.t('Other')\n\t\t];\n\n\t\tDISLIKE_REASONS = [\n\t\t\t$i18n.t(\"Don't like the style\"),\n\t\t\t$i18n.t('Not factually correct'),\n\t\t\t$i18n.t(\"Didn't fully follow instructions\"),\n\t\t\t$i18n.t(\"Refused when it shouldn't have\"),\n\t\t\t$i18n.t('Being lazy'),\n\t\t\t$i18n.t('Other')\n\t\t];\n\t}\n\n\tlet reasons = [];\n\tlet selectedReason = null;\n\tlet comment = '';\n\n\t$: if (message?.annotation?.rating === 1) {\n\t\treasons = LIKE_REASONS;\n\t} else if (message?.annotation?.rating === -1) {\n\t\treasons = DISLIKE_REASONS;\n\t}\n\n\tonMount(() => {\n\t\tselectedReason = message?.annotation?.reason ?? '';\n\t\tcomment = message?.annotation?.comment ?? '';\n\t\tloadReasons();\n\t});\n\n\tconst submitHandler = () => {\n\t\tconsole.log('submitHandler');\n\n\t\tmessage.annotation.reason = selectedReason;\n\t\tmessage.annotation.comment = comment;\n\n\t\tdispatch('submit');\n\n\t\ttoast.success($i18n.t('Thanks for your feedback!'));\n\t\tshow = false;\n\t};\n</script>\n\n<div\n\tclass=\" my-2.5 rounded-xl px-4 py-3 border dark:border-gray-850\"\n\tid=\"message-feedback-{messageId}\"\n>\n\t<div class=\"flex justify-between items-center\">\n\t\t<div class=\" text-sm\">{$i18n.t('Tell us more:')}</div>\n\n\t\t<button\n\t\t\ton:click={() => {\n\t\t\t\tshow = false;\n\t\t\t}}\n\t\t>\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tclass=\"size-4\"\n\t\t\t>\n\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18 18 6M6 6l12 12\" />\n\t\t\t</svg>\n\t\t</button>\n\t</div>\n\n\t{#if reasons.length > 0}\n\t\t<div class=\"flex flex-wrap gap-2 text-sm mt-2.5\">\n\t\t\t{#each reasons as reason}\n\t\t\t\t<button\n\t\t\t\t\tclass=\"px-3.5 py-1 border dark:border-gray-850 hover:bg-gray-100 dark:hover:bg-gray-850 {selectedReason ===\n\t\t\t\t\treason\n\t\t\t\t\t\t? 'bg-gray-200 dark:bg-gray-800'\n\t\t\t\t\t\t: ''} transition rounded-lg\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tselectedReason = reason;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{reason}\n\t\t\t\t</button>\n\t\t\t{/each}\n\t\t</div>\n\t{/if}\n\n\t<div class=\"mt-2\">\n\t\t<textarea\n\t\t\tbind:value={comment}\n\t\t\tclass=\"w-full text-sm px-1 py-2 bg-transparent outline-none resize-none rounded-xl\"\n\t\t\tplaceholder={$i18n.t('Feel free to add specific details')}\n\t\t\trows=\"2\"\n\t\t/>\n\t</div>\n\n\t<div class=\"mt-2 flex justify-end\">\n\t\t<button\n\t\t\tclass=\" bg-emerald-700 text-white text-sm font-medium rounded-lg px-3.5 py-1.5\"\n\t\t\ton:click={() => {\n\t\t\t\tsubmitHandler();\n\t\t\t}}\n\t\t>\n\t\t\t{$i18n.t('Submit')}\n\t\t</button>\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { getContext, onMount, tick } from 'svelte';\n\n\timport Modal from '$lib/components/common/Modal.svelte';\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let citation;\n\n\tlet mergedDocuments = [];\n\n\t$: if (citation) {\n\t\tmergedDocuments = citation.document?.map((c, i) => {\n\t\t\treturn {\n\t\t\t\tsource: citation.source,\n\t\t\t\tdocument: c,\n\t\t\t\tmetadata: citation.metadata?.[i]\n\t\t\t};\n\t\t});\n\t}\n</script>\n\n<Modal size=\"lg\" bind:show>\n\t<div>\n\t\t<div class=\" flex justify-between dark:text-gray-300 px-5 pt-4 pb-2\">\n\t\t\t<div class=\" text-lg font-medium self-center capitalize\">\n\t\t\t\t{$i18n.t('Citation')}\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tclass=\"self-center\"\n\t\t\t\ton:click={() => {\n\t\t\t\t\tshow = false;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\tclass=\"w-5 h-5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class=\"flex flex-col md:flex-row w-full px-6 pb-5 md:space-x-4\">\n\t\t\t<div\n\t\t\t\tclass=\"flex flex-col w-full dark:text-gray-200 overflow-y-scroll max-h-[22rem] scrollbar-hidden\"\n\t\t\t>\n\t\t\t\t{#each mergedDocuments as document, documentIdx}\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t\t<div class=\"text-sm font-medium dark:text-gray-300\">\n\t\t\t\t\t\t\t{$i18n.t('Source')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"text-sm dark:text-gray-400\">\n\t\t\t\t\t\t\t{document.source?.name ?? $i18n.t('No source available')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\n\t\t\t\t\t\t<div class=\" text-sm font-medium dark:text-gray-300\">\n\t\t\t\t\t\t\t{$i18n.t('Content')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<pre class=\"text-sm dark:text-gray-400 whitespace-pre-line\">\n\t\t\t\t\t\t\t{document.document}\n\t\t\t\t\t\t</pre>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if documentIdx !== mergedDocuments.length - 1}\n\t\t\t\t\t\t<hr class=\" dark:border-gray-850 my-3\" />\n\t\t\t\t\t{/if}\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m4.5 15.75 7.5-7.5 7.5 7.5\" />\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '2';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport ChevronDown from '$lib/components/icons/ChevronDown.svelte';\n\timport ChevronUp from '$lib/components/icons/ChevronUp.svelte';\n\timport MagnifyingGlass from '$lib/components/icons/MagnifyingGlass.svelte';\n\timport { Collapsible } from 'bits-ui';\n\timport { slide } from 'svelte/transition';\n\n\texport let status = { urls: [], query: '' };\n\tlet state = false;\n</script>\n\n<Collapsible.Root class=\"w-full space-y-1\" bind:open={state}>\n\t<Collapsible.Trigger>\n\t\t<div\n\t\t\tclass=\"flex items-center gap-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition\"\n\t\t>\n\t\t\t<slot />\n\n\t\t\t{#if state}\n\t\t\t\t<ChevronUp strokeWidth=\"3.5\" className=\"size-3.5 \" />\n\t\t\t{:else}\n\t\t\t\t<ChevronDown strokeWidth=\"3.5\" className=\"size-3.5 \" />\n\t\t\t{/if}\n\t\t</div>\n\t</Collapsible.Trigger>\n\n\t<Collapsible.Content\n\t\tclass=\" text-sm border border-gray-300/30 dark:border-gray-700/50 rounded-xl\"\n\t\ttransition={slide}\n\t>\n\t\t{#if status?.query}\n\t\t\t<a\n\t\t\t\thref=\"https://www.google.com/search?q={status.query}\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tclass=\"flex w-full items-center p-3 px-4 border-b border-gray-300/30 dark:border-gray-700/50 group/item justify-between font-normal text-gray-800 dark:text-gray-300 no-underline\"\n\t\t\t>\n\t\t\t\t<div class=\"flex gap-2 items-center\">\n\t\t\t\t\t<MagnifyingGlass />\n\n\t\t\t\t\t<div class=\" line-clamp-1\">\n\t\t\t\t\t\t{status.query}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t>\n\t\t\t\t\t<!--  -->\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t{/if}\n\n\t\t{#each status.urls as url, urlIdx}\n\t\t\t<a\n\t\t\t\thref={url}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tclass=\"flex w-full items-center p-3 px-4 {urlIdx === status.urls.length - 1\n\t\t\t\t\t? ''\n\t\t\t\t\t: 'border-b border-gray-300/30 dark:border-gray-700/50'} group/item justify-between font-normal text-gray-800 dark:text-gray-300\"\n\t\t\t>\n\t\t\t\t<div class=\" line-clamp-1\">\n\t\t\t\t\t{url}\n\t\t\t\t</div>\n\n\t\t\t\t<div\n\t\t\t\t\tclass=\" ml-1 text-white dark:text-gray-900 group-hover/item:text-gray-600 dark:group-hover/item:text-white transition\"\n\t\t\t\t>\n\t\t\t\t\t<!--  -->\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclass=\"size-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\td=\"M4.22 11.78a.75.75 0 0 1 0-1.06L9.44 5.5H5.75a.75.75 0 0 1 0-1.5h5.5a.75.75 0 0 1 .75.75v5.5a.75.75 0 0 1-1.5 0V6.56l-5.22 5.22a.75.75 0 0 1-1.06 0Z\"\n\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t{/each}\n\t</Collapsible.Content>\n</Collapsible.Root>\n","<script lang=\"ts\">\n\timport { toast } from 'svelte-sonner';\n\timport dayjs from 'dayjs';\n\timport { marked } from 'marked';\n\timport tippy from 'tippy.js';\n\timport auto_render from 'katex/dist/contrib/auto-render.mjs';\n\timport 'katex/dist/katex.min.css';\n\timport mermaid from 'mermaid';\n\n\timport { fade } from 'svelte/transition';\n\timport { createEventDispatcher } from 'svelte';\n\timport { onMount, tick, getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\tconst dispatch = createEventDispatcher();\n\n\timport { config, models, settings } from '$lib/stores';\n\timport { synthesizeOpenAISpeech } from '$lib/apis/audio';\n\timport { imageGenerations } from '$lib/apis/images';\n\timport {\n\t\tapproximateToHumanReadable,\n\t\textractSentences,\n\t\trevertSanitizedResponseContent,\n\t\tsanitizeResponseContent\n\t} from '$lib/utils';\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Name from './Name.svelte';\n\timport ProfileImage from './ProfileImage.svelte';\n\timport Skeleton from './Skeleton.svelte';\n\timport CodeBlock from './CodeBlock.svelte';\n\timport Image from '$lib/components/common/Image.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport RateComment from './RateComment.svelte';\n\timport CitationsModal from '$lib/components/chat/Messages/CitationsModal.svelte';\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport WebSearchResults from './ResponseMessage/WebSearchResults.svelte';\n\n\texport let message;\n\texport let siblings;\n\n\texport let isLastMessage = true;\n\n\texport let readOnly = false;\n\n\texport let updateChatMessages: Function;\n\texport let confirmEditResponseMessage: Function;\n\texport let showPreviousMessage: Function;\n\texport let showNextMessage: Function;\n\texport let rateMessage: Function;\n\n\texport let copyToClipboard: Function;\n\texport let continueGeneration: Function;\n\texport let regenerateResponse: Function;\n\n\tlet model = null;\n\t$: model = $models.find((m) => m.id === message.model);\n\n\tlet edit = false;\n\tlet editedContent = '';\n\tlet editTextAreaElement: HTMLTextAreaElement;\n\tlet tooltipInstance = null;\n\n\tlet sentencesAudio = {};\n\tlet speaking = null;\n\tlet speakingIdx = null;\n\n\tlet loadingSpeech = false;\n\tlet generatingImage = false;\n\n\tlet showRateComment = false;\n\tlet showCitationModal = false;\n\n\tlet selectedCitation = null;\n\n\t$: tokens = marked.lexer(sanitizeResponseContent(message?.content));\n\n\tconst renderer = new marked.Renderer();\n\n\t// For code blocks with simple backticks\n\trenderer.codespan = (code) => {\n\t\treturn `<code>${code.replaceAll('&amp;', '&')}</code>`;\n\t};\n\n\t// Open all links in a new tab/window (from https://github.com/markedjs/marked/issues/655#issuecomment-383226346)\n\tconst origLinkRenderer = renderer.link;\n\trenderer.link = (href, title, text) => {\n\t\tconst html = origLinkRenderer.call(renderer, href, title, text);\n\t\treturn html.replace(/^<a /, '<a target=\"_blank\" rel=\"nofollow\" ');\n\t};\n\n\tconst { extensions, ...defaults } = marked.getDefaults() as marked.MarkedOptions & {\n\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\textensions: any;\n\t};\n\n\t$: if (message) {\n\t\trenderStyling();\n\t}\n\n\tconst renderStyling = async () => {\n\t\tawait tick();\n\n\t\tif (tooltipInstance) {\n\t\t\ttooltipInstance[0]?.destroy();\n\t\t}\n\n\t\trenderLatex();\n\n\t\tif (message.info) {\n\t\t\tlet tooltipContent = '';\n\t\t\tif (message.info.openai) {\n\t\t\t\ttooltipContent = `prompt_tokens: ${message.info.prompt_tokens ?? 'N/A'}<br/>\n\t\t\t\t\t\t\t\t\t\t\t\t\tcompletion_tokens: ${message.info.completion_tokens ?? 'N/A'}<br/>\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotal_tokens: ${message.info.total_tokens ?? 'N/A'}`;\n\t\t\t} else {\n\t\t\t\ttooltipContent = `response_token/s: ${\n\t\t\t\t\t`${\n\t\t\t\t\t\tMath.round(\n\t\t\t\t\t\t\t((message.info.eval_count ?? 0) / (message.info.eval_duration / 1000000000)) * 100\n\t\t\t\t\t\t) / 100\n\t\t\t\t\t} tokens` ?? 'N/A'\n\t\t\t\t}<br/>\n\t\t\t\t\tprompt_token/s: ${\n\t\t\t\t\t\tMath.round(\n\t\t\t\t\t\t\t((message.info.prompt_eval_count ?? 0) /\n\t\t\t\t\t\t\t\t(message.info.prompt_eval_duration / 1000000000)) *\n\t\t\t\t\t\t\t\t100\n\t\t\t\t\t\t) / 100 ?? 'N/A'\n\t\t\t\t\t} tokens<br/>\n                    total_duration: ${\n\t\t\t\t\t\t\t\t\t\t\tMath.round(((message.info.total_duration ?? 0) / 1000000) * 100) / 100 ??\n\t\t\t\t\t\t\t\t\t\t\t'N/A'\n\t\t\t\t\t\t\t\t\t\t}ms<br/>\n                    load_duration: ${\n\t\t\t\t\t\t\t\t\t\t\tMath.round(((message.info.load_duration ?? 0) / 1000000) * 100) / 100 ?? 'N/A'\n\t\t\t\t\t\t\t\t\t\t}ms<br/>\n                    prompt_eval_count: ${message.info.prompt_eval_count ?? 'N/A'}<br/>\n                    prompt_eval_duration: ${\n\t\t\t\t\t\t\t\t\t\t\tMath.round(((message.info.prompt_eval_duration ?? 0) / 1000000) * 100) /\n\t\t\t\t\t\t\t\t\t\t\t\t100 ?? 'N/A'\n\t\t\t\t\t\t\t\t\t\t}ms<br/>\n                    eval_count: ${message.info.eval_count ?? 'N/A'}<br/>\n                    eval_duration: ${\n\t\t\t\t\t\t\t\t\t\t\tMath.round(((message.info.eval_duration ?? 0) / 1000000) * 100) / 100 ?? 'N/A'\n\t\t\t\t\t\t\t\t\t\t}ms<br/>\n                    approximate_total: ${approximateToHumanReadable(message.info.total_duration)}`;\n\t\t\t}\n\t\t\ttooltipInstance = tippy(`#info-${message.id}`, {\n\t\t\t\tcontent: `<span class=\"text-xs\" id=\"tooltip-${message.id}\">${tooltipContent}</span>`,\n\t\t\t\tallowHTML: true\n\t\t\t});\n\t\t}\n\t};\n\n\tconst renderLatex = () => {\n\t\tlet chatMessageElements = document\n\t\t\t.getElementById(`message-${message.id}`)\n\t\t\t?.getElementsByClassName('chat-assistant');\n\n\t\tif (chatMessageElements) {\n\t\t\tfor (const element of chatMessageElements) {\n\t\t\t\tauto_render(element, {\n\t\t\t\t\t// customised options\n\t\t\t\t\t// • auto-render specific keys, e.g.:\n\t\t\t\t\tdelimiters: [\n\t\t\t\t\t\t{ left: '$$', right: '$$', display: false },\n\t\t\t\t\t\t{ left: '$ ', right: ' $', display: false },\n\t\t\t\t\t\t{ left: '\\\\(', right: '\\\\)', display: false },\n\t\t\t\t\t\t{ left: '\\\\[', right: '\\\\]', display: false },\n\t\t\t\t\t\t{ left: '[ ', right: ' ]', display: false }\n\t\t\t\t\t],\n\t\t\t\t\t// • rendering keys, e.g.:\n\t\t\t\t\tthrowOnError: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tconst playAudio = (idx) => {\n\t\treturn new Promise((res) => {\n\t\t\tspeakingIdx = idx;\n\t\t\tconst audio = sentencesAudio[idx];\n\t\t\taudio.play();\n\t\t\taudio.onended = async (e) => {\n\t\t\t\tawait new Promise((r) => setTimeout(r, 300));\n\n\t\t\t\tif (Object.keys(sentencesAudio).length - 1 === idx) {\n\t\t\t\t\tspeaking = null;\n\n\t\t\t\t\tif ($settings.conversationMode) {\n\t\t\t\t\t\tdocument.getElementById('voice-input-button')?.click();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tres(e);\n\t\t\t};\n\t\t});\n\t};\n\n\tconst toggleSpeakMessage = async () => {\n\t\tif (speaking) {\n\t\t\ttry {\n\t\t\t\tspeechSynthesis.cancel();\n\n\t\t\t\tsentencesAudio[speakingIdx].pause();\n\t\t\t\tsentencesAudio[speakingIdx].currentTime = 0;\n\t\t\t} catch {}\n\n\t\t\tspeaking = null;\n\t\t\tspeakingIdx = null;\n\t\t} else {\n\t\t\tif ((message?.content ?? '').trim() !== '') {\n\t\t\t\tspeaking = true;\n\n\t\t\t\tif ($config.audio.tts.engine === 'openai') {\n\t\t\t\t\tloadingSpeech = true;\n\n\t\t\t\t\tconst sentences = extractSentences(message.content).reduce((mergedTexts, currentText) => {\n\t\t\t\t\t\tconst lastIndex = mergedTexts.length - 1;\n\t\t\t\t\t\tif (lastIndex >= 0) {\n\t\t\t\t\t\t\tconst previousText = mergedTexts[lastIndex];\n\t\t\t\t\t\t\tconst wordCount = previousText.split(/\\s+/).length;\n\t\t\t\t\t\t\tif (wordCount < 2) {\n\t\t\t\t\t\t\t\tmergedTexts[lastIndex] = previousText + ' ' + currentText;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmergedTexts.push(currentText);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmergedTexts.push(currentText);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn mergedTexts;\n\t\t\t\t\t}, []);\n\n\t\t\t\t\tconsole.log(sentences);\n\n\t\t\t\t\tsentencesAudio = sentences.reduce((a, e, i, arr) => {\n\t\t\t\t\t\ta[i] = null;\n\t\t\t\t\t\treturn a;\n\t\t\t\t\t}, {});\n\n\t\t\t\t\tlet lastPlayedAudioPromise = Promise.resolve(); // Initialize a promise that resolves immediately\n\n\t\t\t\t\tfor (const [idx, sentence] of sentences.entries()) {\n\t\t\t\t\t\tconst res = await synthesizeOpenAISpeech(\n\t\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t\t$settings?.audio?.tts?.voice ?? $config?.audio?.tts?.voice,\n\t\t\t\t\t\t\tsentence\n\t\t\t\t\t\t).catch((error) => {\n\t\t\t\t\t\t\ttoast.error(error);\n\n\t\t\t\t\t\t\tspeaking = null;\n\t\t\t\t\t\t\tloadingSpeech = false;\n\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res) {\n\t\t\t\t\t\t\tconst blob = await res.blob();\n\t\t\t\t\t\t\tconst blobUrl = URL.createObjectURL(blob);\n\t\t\t\t\t\t\tconst audio = new Audio(blobUrl);\n\t\t\t\t\t\t\tsentencesAudio[idx] = audio;\n\t\t\t\t\t\t\tloadingSpeech = false;\n\t\t\t\t\t\t\tlastPlayedAudioPromise = lastPlayedAudioPromise.then(() => playAudio(idx));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet voices = [];\n\t\t\t\t\tconst getVoicesLoop = setInterval(async () => {\n\t\t\t\t\t\tvoices = await speechSynthesis.getVoices();\n\t\t\t\t\t\tif (voices.length > 0) {\n\t\t\t\t\t\t\tclearInterval(getVoicesLoop);\n\n\t\t\t\t\t\t\tconst voice =\n\t\t\t\t\t\t\t\tvoices\n\t\t\t\t\t\t\t\t\t?.filter(\n\t\t\t\t\t\t\t\t\t\t(v) =>\n\t\t\t\t\t\t\t\t\t\t\tv.voiceURI === ($settings?.audio?.tts?.voice ?? $config?.audio?.tts?.voice)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t?.at(0) ?? undefined;\n\n\t\t\t\t\t\t\tconsole.log(voice);\n\n\t\t\t\t\t\t\tconst speak = new SpeechSynthesisUtterance(message.content);\n\n\t\t\t\t\t\t\tconsole.log(speak);\n\n\t\t\t\t\t\t\tspeak.onend = () => {\n\t\t\t\t\t\t\t\tspeaking = null;\n\t\t\t\t\t\t\t\tif ($settings.conversationMode) {\n\t\t\t\t\t\t\t\t\tdocument.getElementById('voice-input-button')?.click();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (voice) {\n\t\t\t\t\t\t\t\tspeak.voice = voice;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tspeechSynthesis.speak(speak);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttoast.error('No content to speak');\n\t\t\t}\n\t\t}\n\t};\n\n\tconst editMessageHandler = async () => {\n\t\tedit = true;\n\t\teditedContent = message.content;\n\n\t\tawait tick();\n\n\t\teditTextAreaElement.style.height = '';\n\t\teditTextAreaElement.style.height = `${editTextAreaElement.scrollHeight}px`;\n\t};\n\n\tconst editMessageConfirmHandler = async () => {\n\t\tif (editedContent === '') {\n\t\t\teditedContent = ' ';\n\t\t}\n\n\t\tconfirmEditResponseMessage(message.id, editedContent);\n\n\t\tedit = false;\n\t\teditedContent = '';\n\n\t\tawait tick();\n\t\trenderStyling();\n\t};\n\n\tconst cancelEditMessage = async () => {\n\t\tedit = false;\n\t\teditedContent = '';\n\t\tawait tick();\n\t\trenderStyling();\n\t};\n\n\tconst generateImage = async (message) => {\n\t\tgeneratingImage = true;\n\t\tconst res = await imageGenerations(localStorage.token, message.content).catch((error) => {\n\t\t\ttoast.error(error);\n\t\t});\n\t\tconsole.log(res);\n\n\t\tif (res) {\n\t\t\tmessage.files = res.map((image) => ({\n\t\t\t\ttype: 'image',\n\t\t\t\turl: `${image.url}`\n\t\t\t}));\n\n\t\t\tdispatch('save', message);\n\t\t}\n\n\t\tgeneratingImage = false;\n\t};\n\n\t$: if (!edit) {\n\t\t(async () => {\n\t\t\tawait tick();\n\t\t\trenderStyling();\n\n\t\t\tawait mermaid.run({\n\t\t\t\tquerySelector: '.mermaid'\n\t\t\t});\n\t\t})();\n\t}\n\n\tonMount(async () => {\n\t\tawait tick();\n\t\trenderStyling();\n\n\t\tawait mermaid.run({\n\t\t\tquerySelector: '.mermaid'\n\t\t});\n\t});\n</script>\n\n<CitationsModal bind:show={showCitationModal} citation={selectedCitation} />\n\n{#key message.id}\n\t<div\n\t\tclass=\" flex w-full message-{message.id}\"\n\t\tid=\"message-{message.id}\"\n\t\tdir={$settings.chatDirection}\n\t>\n\t\t<ProfileImage\n\t\t\tsrc={model?.info?.meta?.profile_image_url ??\n\t\t\t\t($i18n.language === 'dg-DG' ? `/doge.png` : `${WEBUI_BASE_URL}/static/favicon.png`)}\n\t\t/>\n\n\t\t<div class=\"w-full overflow-hidden pl-1\">\n\t\t\t<Name>\n\t\t\t\t{model?.name ?? message.model}\n\n\t\t\t\t{#if message.timestamp}\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\" self-center invisible group-hover:visible text-gray-400 text-xs font-medium uppercase\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{dayjs(message.timestamp * 1000).format($i18n.t('h:mm a'))}\n\t\t\t\t\t</span>\n\t\t\t\t{/if}\n\t\t\t</Name>\n\n\t\t\t{#if (message?.files ?? []).filter((f) => f.type === 'image').length > 0}\n\t\t\t\t<div class=\"my-2.5 w-full flex overflow-x-auto gap-2 flex-wrap\">\n\t\t\t\t\t{#each message.files as file}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{#if file.type === 'image'}\n\t\t\t\t\t\t\t\t<Image src={file.url} />\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div\n\t\t\t\tclass=\"prose chat-{message.role} w-full max-w-full dark:prose-invert prose-headings:my-0 prose-headings:-mb-4 prose-p:m-0 prose-p:-mb-6 prose-pre:my-0 prose-table:my-0 prose-blockquote:my-0 prose-img:my-0 prose-ul:-my-4 prose-ol:-my-4 prose-li:-my-3 prose-ul:-mb-6 prose-ol:-mb-8 prose-ol:p-0 prose-li:-mb-4 whitespace-pre-line\"\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t{#if (message?.statusHistory ?? [...(message?.status ? [message?.status] : [])]).length > 0}\n\t\t\t\t\t\t{@const status = (\n\t\t\t\t\t\t\tmessage?.statusHistory ?? [...(message?.status ? [message?.status] : [])]\n\t\t\t\t\t\t).at(-1)}\n\t\t\t\t\t\t<div class=\"flex items-center gap-2 pt-1 pb-1\">\n\t\t\t\t\t\t\t{#if status.done === false}\n\t\t\t\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t\t\t\t<Spinner className=\"size-4\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if status?.action === 'web_search' && status?.urls}\n\t\t\t\t\t\t\t\t<WebSearchResults {status}>\n\t\t\t\t\t\t\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"text-base line-clamp-1 text-wrap\">\n\t\t\t\t\t\t\t\t\t\t\t{status?.description}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</WebSearchResults>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5\">\n\t\t\t\t\t\t\t\t\t<div class=\" text-gray-500 dark:text-gray-500 text-base line-clamp-1 text-wrap\">\n\t\t\t\t\t\t\t\t\t\t{status?.description}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if edit === true}\n\t\t\t\t\t\t<div class=\"w-full bg-gray-50 dark:bg-gray-800 rounded-3xl px-5 py-3 my-2\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tid=\"message-edit-{message.id}\"\n\t\t\t\t\t\t\t\tbind:this={editTextAreaElement}\n\t\t\t\t\t\t\t\tclass=\" bg-transparent outline-none w-full resize-none\"\n\t\t\t\t\t\t\t\tbind:value={editedContent}\n\t\t\t\t\t\t\t\ton:input={(e) => {\n\t\t\t\t\t\t\t\t\te.target.style.height = '';\n\t\t\t\t\t\t\t\t\te.target.style.height = `${e.target.scrollHeight}px`;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div class=\" mt-2 mb-1 flex justify-end space-x-1.5 text-sm font-medium\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"close-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\"px-4 py-2 bg-white hover:bg-gray-100 text-gray-800 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tcancelEditMessage();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Cancel')}\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tid=\"save-edit-message-button\"\n\t\t\t\t\t\t\t\t\tclass=\" px-4 py-2 bg-gray-900 hover:bg-gray-850 text-gray-100 transition rounded-3xl\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\teditMessageConfirmHandler();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Save')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"w-full\">\n\t\t\t\t\t\t\t{#if message.content === '' && !message.error}\n\t\t\t\t\t\t\t\t<Skeleton />\n\t\t\t\t\t\t\t{:else if message.content && message.error !== true}\n\t\t\t\t\t\t\t\t<!-- always show message contents even if there's an error -->\n\t\t\t\t\t\t\t\t<!-- unless message.error === true which is legacy error handling, where the error message is stored in message.content -->\n\t\t\t\t\t\t\t\t{#each tokens as token, tokenIdx}\n\t\t\t\t\t\t\t\t\t{#if token.type === 'code'}\n\t\t\t\t\t\t\t\t\t\t{#if token.lang === 'mermaid'}\n\t\t\t\t\t\t\t\t\t\t\t<pre class=\"mermaid\">{revertSanitizedResponseContent(token.text)}</pre>\n\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t<CodeBlock\n\t\t\t\t\t\t\t\t\t\t\t\tid={`${message.id}-${tokenIdx}`}\n\t\t\t\t\t\t\t\t\t\t\t\tlang={token?.lang ?? ''}\n\t\t\t\t\t\t\t\t\t\t\t\tcode={revertSanitizedResponseContent(token?.text ?? '')}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t{@html marked.parse(token.raw, {\n\t\t\t\t\t\t\t\t\t\t\t...defaults,\n\t\t\t\t\t\t\t\t\t\t\tgfm: true,\n\t\t\t\t\t\t\t\t\t\t\tbreaks: true,\n\t\t\t\t\t\t\t\t\t\t\trenderer\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if message.error}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"flex mt-2 mb-4 space-x-2 border px-4 py-3 border-red-800 bg-red-800/30 font-medium rounded-lg\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5 self-center\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\n\t\t\t\t\t\t\t\t\t<div class=\" self-center\">\n\t\t\t\t\t\t\t\t\t\t{message?.error?.content ?? message.content}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if message.citations}\n\t\t\t\t\t\t\t\t<div class=\"mt-1 mb-2 w-full flex gap-1 items-center flex-wrap\">\n\t\t\t\t\t\t\t\t\t{#each message.citations.reduce((acc, citation) => {\n\t\t\t\t\t\t\t\t\t\tcitation.document.forEach((document, index) => {\n\t\t\t\t\t\t\t\t\t\t\tconst metadata = citation.metadata?.[index];\n\t\t\t\t\t\t\t\t\t\t\tconst id = metadata?.source ?? 'N/A';\n\t\t\t\t\t\t\t\t\t\t\tlet source = citation?.source;\n\t\t\t\t\t\t\t\t\t\t\t// Check if ID looks like a URL\n\t\t\t\t\t\t\t\t\t\t\tif (id.startsWith('http://') || id.startsWith('https://')) {\n\t\t\t\t\t\t\t\t\t\t\t\tsource = { name: id };\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tconst existingSource = acc.find((item) => item.id === id);\n\n\t\t\t\t\t\t\t\t\t\t\tif (existingSource) {\n\t\t\t\t\t\t\t\t\t\t\t\texistingSource.document.push(document);\n\t\t\t\t\t\t\t\t\t\t\t\texistingSource.metadata.push(metadata);\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tacc.push( { id: id, source: source, document: [document], metadata: metadata ? [metadata] : [] } );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t\t\t\t}, []) as citation, idx}\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex gap-1 text-xs font-semibold\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex dark:text-gray-300 py-1 px-1 bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition rounded-xl\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowCitationModal = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedCitation = citation;\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"bg-white dark:bg-gray-700 rounded-full size-4\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{idx + 1}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex-1 mx-2 line-clamp-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{citation.source.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if message.done || siblings.length > 1}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\" flex justify-start overflow-x-auto buttons text-gray-600 dark:text-gray-500\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{#if siblings.length > 1}\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex self-center min-w-fit\" dir=\"ltr\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowPreviousMessage(message);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.75 19.5 8.25 12l7.5-7.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"text-sm tracking-widest font-semibold self-center dark:text-gray-100 min-w-fit\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{siblings.indexOf(message.id) + 1}/{siblings.length}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"self-center p-1 hover:bg-black/5 dark:hover:bg-white/5 dark:hover:text-white hover:text-black rounded-md transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowNextMessage(message);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"size-3.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m8.25 4.5 7.5 7.5-7.5 7.5\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t{#if message.done}\n\t\t\t\t\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Edit')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditMessageHandler();\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Copy')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition copy-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcopyToClipboard(message.content);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Read Aloud')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"speak-button-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!loadingSpeech) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoggleSpeakMessage(message);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{#if loadingSpeech}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t><style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_S1WN {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_MGfb 0.8s linear infinite;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.8s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_Km9P {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.65s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_JApP {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.5s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_MGfb {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t93.75%,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</style><circle class=\"spinner_S1WN\" cx=\"4\" cy=\"12\" r=\"3\" /><circle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_S1WN spinner_Km9P\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcx=\"12\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcy=\"12\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tr=\"3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/><circle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_S1WN spinner_JApP\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcx=\"20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcy=\"12\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tr=\"3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/></svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{:else if speaking}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t{#if $config?.features.enable_image_generation && !readOnly}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Generate Image')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'}  p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (!generatingImage) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgenerateImage(message);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{#if generatingImage}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t><style>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_S1WN {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: spinner_MGfb 0.8s linear infinite;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.8s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_Km9P {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.65s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.spinner_JApP {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation-delay: -0.5s;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@keyframes spinner_MGfb {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t93.75%,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.2;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</style><circle class=\"spinner_S1WN\" cx=\"4\" cy=\"12\" r=\"3\" /><circle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_S1WN spinner_Km9P\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcx=\"12\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcy=\"12\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tr=\"3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/><circle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"spinner_S1WN spinner_JApP\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcx=\"20\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcy=\"12\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tr=\"3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/></svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t{#if message.info}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Generation Info')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\" {isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition whitespace-pre-wrap\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(message);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"info-{message.id}\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t\t\t\t{#if !readOnly}\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Good Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg {(message\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.annotation?.rating ?? null) === 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trateMessage(message.id, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = true;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getElementById(`message-feedback-${message.id}`)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.scrollIntoView();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t><path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/></svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Bad Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg {(message\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.annotation?.rating ?? null) === -1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: ''} dark:hover:text-white hover:text-black transition\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trateMessage(message.id, -1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = true;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getElementById(`message-feedback-${message.id}`)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t?.scrollIntoView();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t><path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/></svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t\t{#if isLastMessage}\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Continue Response')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontinueGeneration();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Regenerate')} placement=\"bottom\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"{isLastMessage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'visible'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'invisible group-hover:visible'} p-1.5 hover:bg-black/5 dark:hover:bg-white/5 rounded-lg dark:hover:text-white hover:text-black transition regenerate-response-button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowRateComment = false;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tregenerateResponse(message);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2.3\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if message.done && showRateComment}\n\t\t\t\t\t\t\t\t<RateComment\n\t\t\t\t\t\t\t\t\tmessageId={message.id}\n\t\t\t\t\t\t\t\t\tbind:show={showRateComment}\n\t\t\t\t\t\t\t\t\tbind:message\n\t\t\t\t\t\t\t\t\ton:submit={() => {\n\t\t\t\t\t\t\t\t\t\tupdateChatMessages();\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n{/key}\n\n<style>\n\t.buttons::-webkit-scrollbar {\n\t\tdisplay: none; /* for Chrome, Safari and Opera */\n\t}\n\n\t.buttons {\n\t\t-ms-overflow-style: none; /* IE and Edge */\n\t\tscrollbar-width: none; /* Firefox */\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { WEBUI_BASE_URL } from '$lib/constants';\n\timport { marked } from 'marked';\n\n\timport { config, user, models as _models } from '$lib/stores';\n\timport { onMount, getContext } from 'svelte';\n\n\timport { blur, fade } from 'svelte/transition';\n\n\timport Suggestions from '../MessageInput/Suggestions.svelte';\n\timport { sanitizeResponseContent } from '$lib/utils';\n\n\tconst i18n = getContext('i18n');\n\n\texport let modelIds = [];\n\texport let models = [];\n\n\texport let submitPrompt;\n\n\tlet mounted = false;\n\tlet selectedModelIdx = 0;\n\n\t$: if (modelIds.length > 0) {\n\t\tselectedModelIdx = models.length - 1;\n\t}\n\n\t$: models = modelIds.map((id) => $_models.find((m) => m.id === id));\n\n\tonMount(() => {\n\t\tmounted = true;\n\t});\n</script>\n\n{#key mounted}\n\t<div class=\"m-auto w-full max-w-6xl px-8 lg:px-24 pb-10\">\n\t\t<div class=\"flex justify-start\">\n\t\t\t<div class=\"flex -space-x-4 mb-1\" in:fade={{ duration: 200 }}>\n\t\t\t\t{#each models as model, modelIdx}\n\t\t\t\t\t<button\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tselectedModelIdx = modelIdx;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tcrossorigin=\"anonymous\"\n\t\t\t\t\t\t\tsrc={model?.info?.meta?.profile_image_url ??\n\t\t\t\t\t\t\t\t($i18n.language === 'dg-DG' ? `/doge.png` : `${WEBUI_BASE_URL}/static/favicon.png`)}\n\t\t\t\t\t\t\tclass=\" size-[2.7rem] rounded-full border-[1px] border-gray-200 dark:border-none\"\n\t\t\t\t\t\t\talt=\"logo\"\n\t\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</button>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div\n\t\t\tclass=\" mt-2 mb-4 text-3xl text-gray-800 dark:text-gray-100 font-semibold text-left flex items-center gap-4\"\n\t\t>\n\t\t\t<div>\n\t\t\t\t<div class=\" capitalize line-clamp-1\" in:fade={{ duration: 200 }}>\n\t\t\t\t\t{#if models[selectedModelIdx]?.info}\n\t\t\t\t\t\t{models[selectedModelIdx]?.info?.name}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t{$i18n.t('Hello, {{name}}', { name: $user.name })}\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\n\t\t\t\t<div in:fade={{ duration: 200, delay: 200 }}>\n\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.description ?? null}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"mt-0.5 text-base font-normal text-gray-500 dark:text-gray-400 line-clamp-3 markdown\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{@html marked.parse(\n\t\t\t\t\t\t\t\tsanitizeResponseContent(models[selectedModelIdx]?.info?.meta?.description)\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.user}\n\t\t\t\t\t\t\t<div class=\"mt-0.5 text-sm font-normal text-gray-400 dark:text-gray-500\">\n\t\t\t\t\t\t\t\tBy\n\t\t\t\t\t\t\t\t{#if models[selectedModelIdx]?.info?.meta?.user.community}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref=\"https://openwebui.com/m/{models[selectedModelIdx]?.info?.meta?.user\n\t\t\t\t\t\t\t\t\t\t\t.username}\"\n\t\t\t\t\t\t\t\t\t\t>{models[selectedModelIdx]?.info?.meta?.user.name\n\t\t\t\t\t\t\t\t\t\t\t? models[selectedModelIdx]?.info?.meta?.user.name\n\t\t\t\t\t\t\t\t\t\t\t: `@${models[selectedModelIdx]?.info?.meta?.user.username}`}</a\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t{models[selectedModelIdx]?.info?.meta?.user.name}\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\" font-medium text-gray-400 dark:text-gray-500 line-clamp-1\">\n\t\t\t\t\t\t\t{$i18n.t('How can I help you today?')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\" w-full\" in:fade={{ duration: 200, delay: 300 }}>\n\t\t\t<Suggestions\n\t\t\t\tsuggestionPrompts={models[selectedModelIdx]?.info?.meta?.suggestion_prompts ??\n\t\t\t\t\t$config.default_prompt_suggestions}\n\t\t\t\t{submitPrompt}\n\t\t\t/>\n\t\t</div>\n\t</div>\n{/key}\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from 'svelte';\n\n\timport { updateChatById } from '$lib/apis/chats';\n\timport { onMount, tick } from 'svelte';\n\timport ResponseMessage from './ResponseMessage.svelte';\n\n\texport let chatId;\n\n\texport let history;\n\texport let messages = [];\n\texport let messageIdx;\n\n\texport let parentMessage;\n\n\texport let readOnly = false;\n\n\texport let updateChatMessages: Function;\n\texport let confirmEditResponseMessage: Function;\n\texport let rateMessage: Function;\n\n\texport let copyToClipboard: Function;\n\texport let continueGeneration: Function;\n\texport let regenerateResponse: Function;\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet currentMessageId;\n\n\tlet groupedMessagesIdx = {};\n\tlet groupedMessages = {};\n\n\t$: groupedMessages = parentMessage?.models.reduce((a, model) => {\n\t\tconst modelMessages = parentMessage?.childrenIds\n\t\t\t.map((id) => history.messages[id])\n\t\t\t.filter((m) => m.model === model);\n\n\t\treturn {\n\t\t\t...a,\n\t\t\t[model]: { messages: modelMessages }\n\t\t};\n\t}, {});\n\n\tconst showPreviousMessage = (model) => {\n\t\tgroupedMessagesIdx[model] = Math.max(0, groupedMessagesIdx[model] - 1);\n\t\tlet messageId = groupedMessages[model].messages[groupedMessagesIdx[model]].id;\n\n\t\tconsole.log(messageId);\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\thistory.currentId = messageId;\n\n\t\tdispatch('change');\n\t};\n\n\tconst showNextMessage = (model) => {\n\t\tgroupedMessagesIdx[model] = Math.min(\n\t\t\tgroupedMessages[model].messages.length - 1,\n\t\t\tgroupedMessagesIdx[model] + 1\n\t\t);\n\n\t\tlet messageId = groupedMessages[model].messages[groupedMessagesIdx[model]].id;\n\t\tconsole.log(messageId);\n\n\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t}\n\n\t\thistory.currentId = messageId;\n\n\t\tdispatch('change');\n\t};\n\n\tonMount(async () => {\n\t\tawait tick();\n\t\tcurrentMessageId = messages[messageIdx].id;\n\n\t\tfor (const model of parentMessage?.models) {\n\t\t\tconst idx = groupedMessages[model].messages.findIndex((m) => m.id === currentMessageId);\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tgroupedMessagesIdx[model] = idx;\n\t\t\t} else {\n\t\t\t\tgroupedMessagesIdx[model] = 0;\n\t\t\t}\n\t\t}\n\t});\n</script>\n\n<div>\n\t<div\n\t\tclass=\"flex snap-x snap-mandatory overflow-x-auto scrollbar-hidden\"\n\t\tid=\"responses-container-{parentMessage.id}\"\n\t>\n\t\t{#each Object.keys(groupedMessages) as model}\n\t\t\t{#if groupedMessagesIdx[model] !== undefined && groupedMessages[model].messages.length > 0}\n\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions -->\n\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events -->\n\n\t\t\t\t<div\n\t\t\t\t\tclass=\" snap-center min-w-80 w-full max-w-full m-1 border {history.messages[\n\t\t\t\t\t\tcurrentMessageId\n\t\t\t\t\t].model === model\n\t\t\t\t\t\t? 'border-gray-100 dark:border-gray-850 border-[1.5px]'\n\t\t\t\t\t\t: 'border-gray-50 dark:border-gray-850 '} transition p-5 rounded-3xl\"\n\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\tcurrentMessageId = groupedMessages[model].messages[groupedMessagesIdx[model]].id;\n\n\t\t\t\t\t\tlet messageId = groupedMessages[model].messages[groupedMessagesIdx[model]].id;\n\n\t\t\t\t\t\tconsole.log(messageId);\n\t\t\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\thistory.currentId = messageId;\n\t\t\t\t\t\tdispatch('change');\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ResponseMessage\n\t\t\t\t\t\tmessage={groupedMessages[model].messages[groupedMessagesIdx[model]]}\n\t\t\t\t\t\tsiblings={groupedMessages[model].messages.map((m) => m.id)}\n\t\t\t\t\t\tisLastMessage={true}\n\t\t\t\t\t\t{updateChatMessages}\n\t\t\t\t\t\t{confirmEditResponseMessage}\n\t\t\t\t\t\tshowPreviousMessage={() => showPreviousMessage(model)}\n\t\t\t\t\t\tshowNextMessage={() => showNextMessage(model)}\n\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t{copyToClipboard}\n\t\t\t\t\t\t{continueGeneration}\n\t\t\t\t\t\tregenerateResponse={async (message) => {\n\t\t\t\t\t\t\tregenerateResponse(message);\n\t\t\t\t\t\t\tawait tick();\n\t\t\t\t\t\t\tgroupedMessagesIdx[model] = groupedMessages[model].messages.length - 1;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ton:save={async (e) => {\n\t\t\t\t\t\t\tconsole.log('save', e);\n\n\t\t\t\t\t\t\tconst message = e.detail;\n\t\t\t\t\t\t\thistory.messages[message.id] = message;\n\t\t\t\t\t\t\tawait updateChatById(localStorage.token, chatId, {\n\t\t\t\t\t\t\t\tmessages: messages,\n\t\t\t\t\t\t\t\thistory: history\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t{/each}\n\t</div>\n</div>\n","<script lang=\"ts\">\n\timport { v4 as uuidv4 } from 'uuid';\n\timport { chats, config, settings, user as _user, mobile } from '$lib/stores';\n\timport { tick, getContext, onMount } from 'svelte';\n\n\timport { toast } from 'svelte-sonner';\n\timport { getChatList, updateChatById } from '$lib/apis/chats';\n\n\timport UserMessage from './Messages/UserMessage.svelte';\n\timport ResponseMessage from './Messages/ResponseMessage.svelte';\n\timport Placeholder from './Messages/Placeholder.svelte';\n\timport Spinner from '../common/Spinner.svelte';\n\timport { imageGenerations } from '$lib/apis/images';\n\timport { copyToClipboard, findWordIndices } from '$lib/utils';\n\timport CompareMessages from './Messages/CompareMessages.svelte';\n\timport { stringify } from 'postcss';\n\n\tconst i18n = getContext('i18n');\n\n\texport let chatId = '';\n\texport let readOnly = false;\n\texport let sendPrompt: Function;\n\texport let continueGeneration: Function;\n\texport let regenerateResponse: Function;\n\n\texport let user = $_user;\n\texport let prompt;\n\texport let processing = '';\n\texport let bottomPadding = false;\n\texport let autoScroll;\n\texport let history = {};\n\texport let messages = [];\n\n\texport let selectedModels;\n\n\t$: if (autoScroll && bottomPadding) {\n\t\t(async () => {\n\t\t\tawait tick();\n\t\t\tscrollToBottom();\n\t\t})();\n\t}\n\n\tconst scrollToBottom = () => {\n\t\tconst element = document.getElementById('messages-container');\n\t\telement.scrollTop = element.scrollHeight;\n\t};\n\n\tconst copyToClipboardWithToast = async (text) => {\n\t\tconst res = await copyToClipboard(text);\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Copying to clipboard was successful!'));\n\t\t}\n\t};\n\n\tconst confirmEditMessage = async (messageId, content) => {\n\t\tlet userPrompt = content;\n\t\tlet userMessageId = uuidv4();\n\n\t\tlet userMessage = {\n\t\t\tid: userMessageId,\n\t\t\tparentId: history.messages[messageId].parentId,\n\t\t\tchildrenIds: [],\n\t\t\trole: 'user',\n\t\t\tcontent: userPrompt,\n\t\t\t...(history.messages[messageId].files && { files: history.messages[messageId].files }),\n\t\t\tmodels: selectedModels.filter((m, mIdx) => selectedModels.indexOf(m) === mIdx)\n\t\t};\n\n\t\tlet messageParentId = history.messages[messageId].parentId;\n\n\t\tif (messageParentId !== null) {\n\t\t\thistory.messages[messageParentId].childrenIds = [\n\t\t\t\t...history.messages[messageParentId].childrenIds,\n\t\t\t\tuserMessageId\n\t\t\t];\n\t\t}\n\n\t\thistory.messages[userMessageId] = userMessage;\n\t\thistory.currentId = userMessageId;\n\n\t\tawait tick();\n\t\tawait sendPrompt(userPrompt, userMessageId);\n\t};\n\n\tconst updateChatMessages = async () => {\n\t\tawait tick();\n\t\tawait updateChatById(localStorage.token, chatId, {\n\t\t\tmessages: messages,\n\t\t\thistory: history\n\t\t});\n\n\t\tawait chats.set(await getChatList(localStorage.token));\n\t};\n\n\tconst confirmEditResponseMessage = async (messageId, content) => {\n\t\thistory.messages[messageId].originalContent = history.messages[messageId].content;\n\t\thistory.messages[messageId].content = content;\n\n\t\tawait updateChatMessages();\n\t};\n\n\tconst rateMessage = async (messageId, rating) => {\n\t\thistory.messages[messageId].annotation = {\n\t\t\t...history.messages[messageId].annotation,\n\t\t\trating: rating\n\t\t};\n\n\t\tawait updateChatMessages();\n\t};\n\n\tconst showPreviousMessage = async (message) => {\n\t\tif (message.parentId !== null) {\n\t\t\tlet messageId =\n\t\t\t\thistory.messages[message.parentId].childrenIds[\n\t\t\t\t\tMath.max(history.messages[message.parentId].childrenIds.indexOf(message.id) - 1, 0)\n\t\t\t\t];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t} else {\n\t\t\tlet childrenIds = Object.values(history.messages)\n\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t.map((message) => message.id);\n\t\t\tlet messageId = childrenIds[Math.max(childrenIds.indexOf(message.id) - 1, 0)];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t}\n\n\t\tawait tick();\n\n\t\tconst element = document.getElementById('messages-container');\n\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\tsetTimeout(() => {\n\t\t\tscrollToBottom();\n\t\t}, 100);\n\t};\n\n\tconst showNextMessage = async (message) => {\n\t\tif (message.parentId !== null) {\n\t\t\tlet messageId =\n\t\t\t\thistory.messages[message.parentId].childrenIds[\n\t\t\t\t\tMath.min(\n\t\t\t\t\t\thistory.messages[message.parentId].childrenIds.indexOf(message.id) + 1,\n\t\t\t\t\t\thistory.messages[message.parentId].childrenIds.length - 1\n\t\t\t\t\t)\n\t\t\t\t];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t} else {\n\t\t\tlet childrenIds = Object.values(history.messages)\n\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t.map((message) => message.id);\n\t\t\tlet messageId =\n\t\t\t\tchildrenIds[Math.min(childrenIds.indexOf(message.id) + 1, childrenIds.length - 1)];\n\n\t\t\tif (message.id !== messageId) {\n\t\t\t\tlet messageChildrenIds = history.messages[messageId].childrenIds;\n\n\t\t\t\twhile (messageChildrenIds.length !== 0) {\n\t\t\t\t\tmessageId = messageChildrenIds.at(-1);\n\t\t\t\t\tmessageChildrenIds = history.messages[messageId].childrenIds;\n\t\t\t\t}\n\n\t\t\t\thistory.currentId = messageId;\n\t\t\t}\n\t\t}\n\n\t\tawait tick();\n\n\t\tconst element = document.getElementById('messages-container');\n\t\tautoScroll = element.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\n\t\tsetTimeout(() => {\n\t\t\tscrollToBottom();\n\t\t}, 100);\n\t};\n\n\tconst deleteMessageHandler = async (messageId) => {\n\t\tconst messageToDelete = history.messages[messageId];\n\n\t\tconst parentMessageId = messageToDelete.parentId;\n\t\tconst childMessageIds = messageToDelete.childrenIds ?? [];\n\n\t\tconst hasDescendantMessages = childMessageIds.some(\n\t\t\t(childId) => history.messages[childId]?.childrenIds?.length > 0\n\t\t);\n\n\t\thistory.currentId = parentMessageId;\n\t\tawait tick();\n\n\t\t// Remove the message itself from the parent message's children array\n\t\thistory.messages[parentMessageId].childrenIds = history.messages[\n\t\t\tparentMessageId\n\t\t].childrenIds.filter((id) => id !== messageId);\n\n\t\tawait tick();\n\n\t\tchildMessageIds.forEach((childId) => {\n\t\t\tconst childMessage = history.messages[childId];\n\n\t\t\tif (childMessage && childMessage.childrenIds) {\n\t\t\t\tif (childMessage.childrenIds.length === 0 && !hasDescendantMessages) {\n\t\t\t\t\t// If there are no other responses/prompts\n\t\t\t\t\thistory.messages[parentMessageId].childrenIds = [];\n\t\t\t\t} else {\n\t\t\t\t\tchildMessage.childrenIds.forEach((grandChildId) => {\n\t\t\t\t\t\tif (history.messages[grandChildId]) {\n\t\t\t\t\t\t\thistory.messages[grandChildId].parentId = parentMessageId;\n\t\t\t\t\t\t\thistory.messages[parentMessageId].childrenIds.push(grandChildId);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove child message id from the parent message's children array\n\t\t\thistory.messages[parentMessageId].childrenIds = history.messages[\n\t\t\t\tparentMessageId\n\t\t\t].childrenIds.filter((id) => id !== childId);\n\t\t});\n\n\t\tawait tick();\n\n\t\tawait updateChatById(localStorage.token, chatId, {\n\t\t\tmessages: messages,\n\t\t\thistory: history\n\t\t});\n\t};\n</script>\n\n<div class=\"h-full flex\">\n\t{#if messages.length == 0}\n\t\t<Placeholder\n\t\t\tmodelIds={selectedModels}\n\t\t\tsubmitPrompt={async (p) => {\n\t\t\t\tlet text = p;\n\n\t\t\t\tif (p.includes('{{CLIPBOARD}}')) {\n\t\t\t\t\tconst clipboardText = await navigator.clipboard.readText().catch((err) => {\n\t\t\t\t\t\ttoast.error($i18n.t('Failed to read clipboard contents'));\n\t\t\t\t\t\treturn '{{CLIPBOARD}}';\n\t\t\t\t\t});\n\n\t\t\t\t\ttext = p.replaceAll('{{CLIPBOARD}}', clipboardText);\n\t\t\t\t}\n\n\t\t\t\tprompt = text;\n\n\t\t\t\tawait tick();\n\n\t\t\t\tconst chatInputElement = document.getElementById('chat-textarea');\n\t\t\t\tif (chatInputElement) {\n\t\t\t\t\tprompt = p;\n\n\t\t\t\t\tchatInputElement.style.height = '';\n\t\t\t\t\tchatInputElement.style.height = Math.min(chatInputElement.scrollHeight, 200) + 'px';\n\t\t\t\t\tchatInputElement.focus();\n\n\t\t\t\t\tconst words = findWordIndices(prompt);\n\n\t\t\t\t\tif (words.length > 0) {\n\t\t\t\t\t\tconst word = words.at(0);\n\t\t\t\t\t\tchatInputElement.setSelectionRange(word?.startIndex, word.endIndex + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tawait tick();\n\t\t\t}}\n\t\t/>\n\t{:else}\n\t\t<div class=\"w-full pt-2\">\n\t\t\t{#key chatId}\n\t\t\t\t{#each messages as message, messageIdx}\n\t\t\t\t\t<div class=\" w-full {messageIdx === messages.length - 1 ? ' pb-12' : ''}\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"flex flex-col justify-between px-5 mb-3 {$settings?.widescreenMode ?? null\n\t\t\t\t\t\t\t\t? 'max-w-full'\n\t\t\t\t\t\t\t\t: 'max-w-5xl'} mx-auto rounded-lg group\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if message.role === 'user'}\n\t\t\t\t\t\t\t\t<UserMessage\n\t\t\t\t\t\t\t\t\ton:delete={() => deleteMessageHandler(message.id)}\n\t\t\t\t\t\t\t\t\t{user}\n\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t\t\t\tisFirstMessage={messageIdx === 0}\n\t\t\t\t\t\t\t\t\tsiblings={message.parentId !== null\n\t\t\t\t\t\t\t\t\t\t? history.messages[message.parentId]?.childrenIds ?? []\n\t\t\t\t\t\t\t\t\t\t: Object.values(history.messages)\n\t\t\t\t\t\t\t\t\t\t\t\t.filter((message) => message.parentId === null)\n\t\t\t\t\t\t\t\t\t\t\t\t.map((message) => message.id) ?? []}\n\t\t\t\t\t\t\t\t\t{confirmEditMessage}\n\t\t\t\t\t\t\t\t\t{showPreviousMessage}\n\t\t\t\t\t\t\t\t\t{showNextMessage}\n\t\t\t\t\t\t\t\t\tcopyToClipboard={copyToClipboardWithToast}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{:else if $mobile || (history.messages[message.parentId]?.models?.length ?? 1) === 1}\n\t\t\t\t\t\t\t\t{#key message.id && history.currentId}\n\t\t\t\t\t\t\t\t\t<ResponseMessage\n\t\t\t\t\t\t\t\t\t\t{message}\n\t\t\t\t\t\t\t\t\t\tsiblings={history.messages[message.parentId]?.childrenIds ?? []}\n\t\t\t\t\t\t\t\t\t\tisLastMessage={messageIdx + 1 === messages.length}\n\t\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t\t\t{updateChatMessages}\n\t\t\t\t\t\t\t\t\t\t{confirmEditResponseMessage}\n\t\t\t\t\t\t\t\t\t\t{showPreviousMessage}\n\t\t\t\t\t\t\t\t\t\t{showNextMessage}\n\t\t\t\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t\t\t\tcopyToClipboard={copyToClipboardWithToast}\n\t\t\t\t\t\t\t\t\t\t{continueGeneration}\n\t\t\t\t\t\t\t\t\t\t{regenerateResponse}\n\t\t\t\t\t\t\t\t\t\ton:save={async (e) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('save', e);\n\n\t\t\t\t\t\t\t\t\t\t\tconst message = e.detail;\n\t\t\t\t\t\t\t\t\t\t\thistory.messages[message.id] = message;\n\t\t\t\t\t\t\t\t\t\t\tawait updateChatById(localStorage.token, chatId, {\n\t\t\t\t\t\t\t\t\t\t\t\tmessages: messages,\n\t\t\t\t\t\t\t\t\t\t\t\thistory: history\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/key}\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t{#key message.parentId}\n\t\t\t\t\t\t\t\t\t<CompareMessages\n\t\t\t\t\t\t\t\t\t\tbind:history\n\t\t\t\t\t\t\t\t\t\t{messages}\n\t\t\t\t\t\t\t\t\t\t{readOnly}\n\t\t\t\t\t\t\t\t\t\t{chatId}\n\t\t\t\t\t\t\t\t\t\tparentMessage={history.messages[message.parentId]}\n\t\t\t\t\t\t\t\t\t\t{messageIdx}\n\t\t\t\t\t\t\t\t\t\t{updateChatMessages}\n\t\t\t\t\t\t\t\t\t\t{confirmEditResponseMessage}\n\t\t\t\t\t\t\t\t\t\t{rateMessage}\n\t\t\t\t\t\t\t\t\t\tcopyToClipboard={copyToClipboardWithToast}\n\t\t\t\t\t\t\t\t\t\t{continueGeneration}\n\t\t\t\t\t\t\t\t\t\t{regenerateResponse}\n\t\t\t\t\t\t\t\t\t\ton:change={async () => {\n\t\t\t\t\t\t\t\t\t\t\tawait updateChatById(localStorage.token, chatId, {\n\t\t\t\t\t\t\t\t\t\t\t\tmessages: messages,\n\t\t\t\t\t\t\t\t\t\t\t\thistory: history\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\tif (autoScroll) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst element = document.getElementById('messages-container');\n\t\t\t\t\t\t\t\t\t\t\t\tautoScroll =\n\t\t\t\t\t\t\t\t\t\t\t\t\telement.scrollHeight - element.scrollTop <= element.clientHeight + 50;\n\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tscrollToBottom();\n\t\t\t\t\t\t\t\t\t\t\t\t}, 100);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{/key}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\n\t\t\t\t{#if bottomPadding}\n\t\t\t\t\t<div class=\"  pb-20\" />\n\t\t\t\t{/if}\n\t\t\t{/key}\n\t\t</div>\n\t{/if}\n</div>\n"],"file":"_app/immutable/chunks/Messages.013a3e06.js"}